{% from 'macros.html' import render_open_close_check %}
{% extends "layout.html" %} {% block title %}--Caja{% endblock %} {% block body %}
<div class="container text-center">
    <div class="row text-center">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> <a
                    class="nav-link {%if not g.idOpen%}active{%endif%}{%if g.open_check%}disabled{%endif%}"
                    data-bs-toggle="tab" href="#open" aria-selected="true" role="tab">Apertura</a> </li>
            <li class="nav-item" role="presentation"> <a
                    class="nav-link {%if g.idOpen%}active{%endif%}{%if not g.open_check%}disabled{%endif%}"
                    data-bs-toggle="tab" href="#close" aria-selected="false" role="tab" tabindex="-1">Cierre</a> </li>
            <li class="nav-item" role="presentation"> <a class="nav-link" data-bs-toggle="tab" href="#today"
                    aria-selected="false" role="tab" tabindex="-1">Estadísticas de hoy</a> </li>
            <li class="nav-item" role="presentation"> <a class="nav-link" data-bs-toggle="tab" href="#week"
                    aria-selected="false" role="tab" tabindex="-1">Estadística semanal</a> </li>
            <li class="nav-item" role="presentation"> <a class="nav-link disabled" href="#" aria-selected="false"
                    tabindex="-1" role="tab">Buscar por fecha:</a> </li>
            <li class="nav-item" role="presentation"> <input class="form-control form-control-sm" type="date"
                    id="inputSmall"> </li>
        </ul>
        <div id="myTabContent" class="tab-content">
            {{ render_open_close_check('apertura',g.open_check)}}
            {{ render_open_close_check('cierre',g.open_check)}}
            <div class="tab-pane fade" id="today" role="tabpanel">
                {% if g.type_user == 'admin' %}
                <table class="table table-hover">
                    <thead>
                        <tr class="table-dark">
                            <th scope="col">Cajero</th>
                            <th scope="col">Hora apertura</th>
                            <th scope="col">Monto apertura</th>
                            <th scope="col">Hora cierre</th>
                            <th scope="col">Monto cierre</th>
                            <th scope="col">Total</th>
                            <th scope="col">Facturas (click para ver)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for check in today_check %}
                        {% if check.NAME_CHECK == g.check %}
                        <tr>
                            <th scope="row">{{check.NAME_CHECK}}</th>
                            <td>{% if check.HOUR_OPEN %} {{check.HOUR_OPEN}} {%endif%}</td>
                            <td>{% if check.AMOUNT_OPEN %} ${{check.AMOUNT_OPEN}} {%endif%}</td>
                            <td>{% if check.HOUR_CLOSE %} {{check.HOUR_CLOSE}} {%endif%}</td>
                            <td>{% if check.AMOUNT_CLOSE %} ${{check.AMOUNT_CLOSE}} {%endif%}</td>
                            <td>{% if check.AMOUNT_TOTAL %} ${{check.AMOUNT_TOTAL}} {%endif%}</td>
                            <td>{% if check.INVOICE%} {{check.INVOICE}} {%endif%}</td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
                <br>
                {% else %}
                <!-- <legend>Datos de cajero ordinario</legend> -->
                <table class="table table-hover">
                    <thead>
                        <tr class="table-dark">
                            <th scope="col">Cajero</th>
                            <th scope="col">Hora apertura</th>
                            <th scope="col">Monto apertura</th>
                            <th scope="col">Hora cierre</th>
                            <th scope="col">Monto cierre</th>
                            <th scope="col">Total</th>
                            <th scope="col">Facturas (click para ver)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for check in today_check %}
                        <tr>
                            <th scope="row">{{check.NAME_CHECK}}</th>
                            <td>{% if check.HOUR_OPEN %} {{check.HOUR_OPEN}} {%endif%}</td>
                            <td>{% if check.AMOUNT_OPEN %} ${{check.AMOUNT_OPEN}} {%endif%}</td>
                            <td>{% if check.HOUR_CLOSE %} {{check.HOUR_CLOSE}} {%endif%}</td>
                            <td>{% if check.AMOUNT_CLOSE %} ${{check.AMOUNT_CLOSE}} {%endif%}</td>
                            <td>{% if check.AMOUNT_TOTAL %} ${{check.AMOUNT_TOTAL}} {%endif%}</td>
                            <td>{% if check.INVOICE%} {{check.INVOICE}} {%endif%}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% endif %}
            </div>
            <div class="tab-pane fade" id="week" role="tabpanel">
                <p>Panel de estadistica de caja semanal</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block scriptjs %}
<script src="{{url_for('static',filename='js/clock.js')}}"></script>
{% endblock %}